# ðŸ“Š Data Schema / Dictionary

> **Purpose:**
> This document defines all data structures, fields, and constraints used within the system or research framework.
> It serves as the canonical reference for **data meaning**, **relationships**, and **validation rules**, ensuring consistency, interoperability, and reproducibility.
> Each section includes a **Goal**, **Writing Guidance**, and an **Example**, harmonizing conceptual clarity with implementation precision.

---

## 1. Overview

**Goal:** Provide a conceptual summary of what the dataset or data structure represents and how it supports the research or system.

### Writing Guidance

* Summarize **what the data captures** (e.g., agentâ€“environment interactions, simulation outputs, sensor logs).
* Describe its **source** (generated, measured, or derived).
* Clarify **intended use** â€” e.g., model training, evaluation, visualization.
* Emphasize **semantic meaning**, not technical storage format.

### Example

> The dataset records multi-agent simulation trajectories.
> Each entry corresponds to a single time step, containing the agentâ€™s state vector, chosen action, environment response, and resulting reward.
> The data provides a reproducible record of interaction dynamics for evaluating learning stability.

---

## 2. Data Model & Entities

**Goal:** Define key entities and their relationships at a conceptual level.

### Writing Guidance

* Identify **primary entities** (e.g., Episode, Agent, Environment).
* Describe **hierarchical or relational structure** â€” one-to-many, many-to-one, etc.
* Show **linkage keys** or conceptual foreign-key analogs.
* Use diagrams or schema tables if necessary.

### Example

> Entities in the simulation data model include:
>
> * **Episode:** A complete sequence of states, actions, and rewards.
> * **Step:** A single time unit within an episode.
> * **Agent:** The acting entity responsible for decisions.
>
> **Relationships:**
>
> * Each `Episode` contains multiple `Steps`.
> * Each `Step` links to exactly one `Agent`.
> * Rewards and environment feedback are stored per `Step`.

---

## 3. Field Definitions

**Goal:** Specify the schema of each data table, object, or record in detail.

### Writing Guidance

* List **field names**, **data types**, **units**, **descriptions**, and **constraints**.
* Group related fields logically (e.g., observation, action, reward).
* Include **range or categorical domain** when applicable.
* Keep definitions domain-agnostic and consistent across data layers.

### Example

| Field          | Type        | Unit | Description                        | Constraint                   |
| -------------- | ----------- | ---- | ---------------------------------- | ---------------------------- |
| `episode_id`   | int         | â€”    | Unique identifier for each episode | Unique                       |
| `step_id`      | int         | â€”    | Index of time step in episode      | Sequential                   |
| `agent_id`     | str         | â€”    | Agent label                        | Must exist in agent registry |
| `state_vector` | list[float] | â€”    | Observed environment state         | Length = 12                  |
| `action`       | int         | â€”    | Chosen discrete action             | [0â€“9]                        |
| `reward`       | float       | â€”    | Scalar feedback value              | [âˆ’1, 1]                      |
| `timestamp`    | float       | s    | Simulation time                    | Monotonic increasing         |

---

## 4. Data Relationships & Hierarchies

**Goal:** Define how data entities relate and how relationships are enforced or represented.

### Writing Guidance

* Describe **linking mechanisms** (e.g., IDs, nesting, references).
* Specify **cardinality** (one-to-many, many-to-one).
* Indicate **ordering guarantees** (temporal, causal).
* Explain **aggregation or grouping logic** if hierarchical.

### Example

> * Each `Episode` has a one-to-many relationship with `Step`.
> * The ordering of `step_id` enforces temporal progression.
> * The `reward` of step *t* depends on `state_vector_t` and `action_t`.
> * Cross-agent interactions are synchronized via shared `timestamp`.

---

## 5. Data Provenance & Lifecycle

**Goal:** Describe how data is generated, transformed, validated, and consumed across stages.

### Writing Guidance

* Identify **data origins** (e.g., simulation logs, external datasets).
* Outline **processing pipeline** â€” raw â†’ intermediate â†’ processed.
* Document **validation or filtering rules**.
* Indicate where derived features or labels are introduced.

### Example

> * **Origin:** Generated by the `Environment` during simulation.
> * **Transformation:** Normalized using z-score across episodes.
> * **Validation:** Steps with missing rewards are excluded.
> * **Consumption:** Processed data fed into training and evaluation subsystems.

---

## 6. Quality Assurance & Validation Rules

**Goal:** Ensure data integrity through verifiable constraints and cleaning policies.

### Writing Guidance

* Define **acceptance criteria** (range checks, type validation, null policies).
* Mention **automated validation scripts** or checksums.
* Specify **outlier handling** and **missing value policies**.

### Example

> * Missing `reward` values imputed as previous valid reward.
> * Invalid state vectors (NaN, inf) trigger discard and re-simulation.
> * Each data file validated with SHA256 checksum on load.
> * Statistical sanity check: mean reward âˆˆ [âˆ’0.2, 0.8].

---

## 7. Storage, Access, and Versioning

**Goal:** Define how and where data is stored, accessed, and version-controlled.

### Writing Guidance

* Specify **storage format** (CSV, JSONL, Parquet, etc.).
* Define **access patterns** (batch, streaming, API).
* Describe **versioning policy** (semantic versioning, timestamp tagging).
* Note **security or privacy measures** if applicable.

### Example

> * Data stored as Parquet files under `/data/trajectories/v2/`.
> * Accessed through a Python `DataLoader` interface supporting sharded reads.
> * Each dataset version tagged as `simdata_v{major}.{minor}`.
> * Metadata JSON includes source commit hash and simulation configuration.

---

## 8. Derived Features & Computed Fields

**Goal:** Clarify how additional fields are calculated or transformed from base data.

### Writing Guidance

* Document **derived variable definitions** and **computation logic**.
* Note dependencies between features and source fields.
* State **why** each derived field is useful (interpretability, performance, etc.).

### Example

| Derived Field       | Formula                        | Purpose                                          |
| ------------------- | ------------------------------ | ------------------------------------------------ |
| `velocity_norm`     | ( \sqrt{v_x^2 + v_y^2} )       | Measures agent motion intensity                  |
| `discounted_reward` | ( r_t + \gamma r_{t+1} + ... ) | Supports reinforcement learning value estimation |
| `normalized_state`  | ( (x - Î¼) / Ïƒ )                | Improves training stability                      |

---

## 9. Data Security & Compliance

**Goal:** Define measures for responsible data handling and compliance with policies.

### Writing Guidance

* Specify **access permissions** and **encryption practices**.
* Clarify **retention and disposal policies**.
* Include any ethical or legal requirements (e.g., anonymization).

### Example

> * All datasets stored on encrypted volumes (AES-256).
> * Access restricted to research group with institutional authentication.
> * No personally identifiable information present.
> * Datasets older than 180 days archived with metadata only retained.

---

## 10. Known Limitations & Future Extensions

**Goal:** Recognize the boundaries of the dataset and outline improvements.

### Writing Guidance

* Identify **coverage limitations**, **sampling biases**, or **format rigidity**.
* Suggest potential schema extensions or metadata enrichments.
* Relate to research direction or evolving experimental requirements.

### Example

> * Current schema supports single-agent trajectories only; multi-agent synchronization to be added.
> * No explicit uncertainty fields â€” planned addition of confidence scores in next version.
> * Schema evolution managed through version-controlled migration scripts.

---

### ðŸ§­ Summary

| Section              | Focus                   | Abstraction | Purpose                          |
| -------------------- | ----------------------- | ----------- | -------------------------------- |
| 1. Overview          | Conceptual framing      | Descriptive | Define dataset intent            |
| 2. Data Model        | Structural organization | Analytical  | Explain entities & relationships |
| 3. Field Definitions | Schema specification    | Technical   | Formalize data structure         |
| 4. Relationships     | Relational mapping      | Logical     | Capture dependencies             |
| 5. Provenance        | Data lifecycle          | Procedural  | Trace data transformation        |
| 6. Quality           | Validation & rules      | Operational | Guarantee integrity              |
| 7. Storage & Access  | Persistence             | Practical   | Ensure controlled retrieval      |
| 8. Derived Features  | Computed extensions     | Analytical  | Clarify enrichment logic         |
| 9. Security          | Ethics & compliance     | Policy      | Enforce responsible use          |
| 10. Limitations      | Reflection              | Strategic   | Identify gaps & evolution path   |
